let bootState={create:function(){game.physics.startSystem(Phaser.Physics.ARCADE),game.state.start('load')}},loadState={create:function(){game.load.onFileComplete.add(fileComplete,this),game.load.onLoadComplete.add(loadComplete,this),loadingText=game.add.text(innerWidth/2,innerHeight/2,'0%',{style:'100px',fill:'#ff0000',fontStyle:'italic',align:'center'}),loadingText.anchor.set(0.5),start()}};function start(){game.time.advancedTiming=!0,game.load.audio('menu_sound','sounds/UI/menu.mp3'),game.load.audio('fool-zombie','sounds/background/Zombies also love to play the fool.mp3'),game.load.audio('menu_hover','sounds/UI/hover.wav'),game.load.audio('footstep','sounds/footstep/step.wav'),game.load.audio('shoot','sounds/gun/pistol/shoot.wav'),game.load.audio('reload','sounds/gun/pistol/reload.wav'),game.load.audio('helicopter-fly','sounds/helicopter/fly.mp3'),game.load.audio('helicopter-stay','sounds/helicopter/stay.mp3'),game.load.audio('hit_1','sounds/hit/hit_1.ogg'),game.load.audio('hit_2','sounds/hit/hit_2.ogg'),game.load.audio('hit_3','sounds/hit/hit_3.ogg'),game.load.audio('hit_4','sounds/hit/hit_4.ogg'),game.load.audio('collect_ammo','sounds/collect/ammo.wav'),game.load.audio('collect_health','sounds/collect/health.ogg'),game.load.audio('zombie_roar_1','sounds/zombie/moan_1.ogg'),game.load.audio('zombie_roar_2','sounds/zombie/moan_2.ogg'),game.load.audio('zombie_roar_3','sounds/zombie/moan_3.ogg'),game.load.audio('zombie_roar_4','sounds/zombie/moan_4.ogg'),game.load.audio('zombie_roar_5','sounds/zombie/moan_5.ogg'),game.load.script('webfont','//ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js'),game.load.script('BlurX','https://cdn.rawgit.com/photonstorm/phaser/master/v2/filters/BlurX.js'),game.load.script('BlurY','https://cdn.rawgit.com/photonstorm/phaser/master/v2/filters/BlurY.js'),game.load.image('wallpaper','assets/background/wallpaper.jpg'),game.load.image('ground','assets/background/ground.png'),game.load.image('fov','assets/circle.png'),game.load.image('arrow','assets/arrow.png'),game.load.image('fist','assets/interface/fist.png'),game.load.image('pistol-img','assets/interface/pistol.png'),game.load.image('HP','assets/interface/health.png'),game.load.image('skull','assets/interface/skull.png'),game.load.image('ammo','assets/interface/ammo.png'),game.load.image('pistol','assets/weapons/guns/pistol.png'),game.load.image('bullet','assets/weapons/guns/bullet.png'),game.load.image('flash','assets/weapons/guns/flash.png'),game.load.image('clip','assets/equipment/clip.png'),game.load.image('kit','assets/equipment/kit.png'),game.load.image('pills','assets/equipment/pills.png'),game.load.spritesheet('officer-die','assets/officer/officer_die_strip.png',49,54,4),game.load.spritesheet('officer-headless','assets/officer/officer_headless_strip.png',46,52,4),game.load.spritesheet('officer-armed','assets/officer/officer_shoot_strip.png',38,45,6),game.load.spritesheet('officer-move','assets/officer/officer_move_strip.png',32,45,8),game.load.spritesheet('zombie_03-move','assets/zombies/zombie_03/move_strip.png',76,82,17),game.load.spritesheet('zombie_03-idle','assets/zombies/zombie_03/idle_strip.png',68,63,17),game.load.spritesheet('zombie_03-attack','assets/zombies/zombie_03/attack_strip.png',87,80,9),game.load.spritesheet('blood','assets/zombies/blood.png',64,64,5),game.load.spritesheet('helicopter','assets/helicopter/helicopter.png',582,450,2),game.load.start()}function fileComplete(a){loadingText.setText(`Loading...${100===a?99:a}%`)}function loadComplete(){game.add.audio('menu_sound').onDecoded.add(()=>{loadingText.setText(`Loading...100%`),game.state.start('menu')},this)}let menuState={create:function(){createWallpaper(),createButtonNewGame(),createButtonFullScreen(),createButtonSound(),createButtonAbout()}};function createWallpaper(){let a=game.add.image(0,0,'wallpaper');a.height=innerHeight,a.width=innerWidth}function createButtonNewGame(){let a=game.add.text(20*innerWidth/100,15*innerHeight/100,'New Game',{font:'60px Eater',fill:'#ffffff'});a.inputEnabled=!0,a.input.useHandCursor=!0,sounds.menu=game.add.audio('menu_sound'),sounds.menu.play('',0,1,!0),a.events.onInputDown.addOnce(newGame,this),a.events.onInputOver.add(over,this),a.events.onInputOut.add(out,this)}function createButtonFullScreen(){let a=game.add.text(20*innerWidth/100,30*innerHeight/100,'Full Screen',{font:'60px Eater',fill:'#ffffff'});a.inputEnabled=!0,a.input.useHandCursor=!0,a.events.onInputDown.add(toggleFullScreen,this),a.events.onInputOver.add(over,this),a.events.onInputOut.add(out,this)}function createButtonSound(){let a=game.add.text(20*innerWidth/100,45*innerHeight/100,'Sounds: On/Off',{font:'60px Eater',fill:'#ffffff'});a.inputEnabled=!0,a.input.useHandCursor=!0,a.events.onInputDown.add(toggleSound,this),a.events.onInputOver.add(over,this),a.events.onInputOut.add(out,this)}function createButtonAbout(){let a=game.add.text(20*innerWidth/100,60*innerHeight/100,'About',{font:'60px Eater',fill:'#ffffff'});a.inputEnabled=!0,a.input.useHandCursor=!0,a.events.onInputDown.add(linkAbout,this),a.events.onInputOver.add(over,this),a.events.onInputOut.add(out,this)}function over(a){a.fill='#ff0000',game.sound.play('menu_hover')}function out(a){a.fill='#ffffff'}function newGame(){sounds.menu.stop(),game.state.start('play')}function toggleFullScreen(){game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,game.scale.pageAlignHorizontally=!0,game.scale.pageAlignVertically=!0,game.scale.isFullScreen?game.scale.stopFullScreen():game.scale.startFullScreen(!1)}function toggleSound(){game.sound.mute=!game.sound.mute,sounds.menu.isPlaying?sounds.menu.pause():sounds.menu.resume()}function linkAbout(){window.open('./about.html','_self')}let playState={create:function(){createSounds(),createSurface(),createBlood(),createLoot(),createBullet(),createOfficer(),createWeapon(),createDetectionArea(),createEnemies(),createScore(),createiFace(),createHP(),createTimer(),setCamera(officer)},update:function(){circle.x=officer.x,circle.y=officer.y,officer.body.velocity.x=0,officer.body.velocity.y=0,officer.body.angularVelocity=0,game.physics.arcade.collide(enemies),game.physics.arcade.collide(officer,enemies,collideDamageHandler,null,this),game.physics.arcade.overlap(officer,weapon,overlapWeaponHandler,null,this),game.physics.arcade.overlap(officer,loot,overlapLootHandler,null,this),game.physics.arcade.overlap(enemies,bullet,overlapFireHandler,null,this),game.physics.arcade.overlap(circle,enemies,overlapEnemyHandler,null,this),game.input.mouse.mouseWheelCallback=mouseWheel,helicopterArrived&&(iFace.arrow.rotation=game.physics.arcade.angleToXY(iFace.arrow,helicopter.body.x,helicopter.body.y),game.physics.arcade.overlap(officer,helicopter,overlapHelicopterHandler,null,this)),game.input.keyboard.isDown(Phaser.Keyboard.D)&&officerAlive?officer.body.angularVelocity=game.input.keyboard.isDown(Phaser.Keyboard.SHIFT)?120:250:game.input.keyboard.isDown(Phaser.Keyboard.A)&&officerAlive&&(officer.body.angularVelocity=game.input.keyboard.isDown(Phaser.Keyboard.SHIFT)?-120:-250),game.input.keyboard.isDown(Phaser.Keyboard.W)&&officerAlive?(game.physics.arcade.velocityFromAngle(officer.angle,officerVelocity.front*currentSet.speedCoefficient,officer.body.velocity),officer.animations.play('move',officerVelocity.front*currentSet.speedCoefficient/10,!1),game.time.now>stomp&&(sounds.foot.play('',0,0.5),stomp=game.time.now+2*officerVelocity.back)):game.input.keyboard.isDown(Phaser.Keyboard.S)&&officerAlive&&(game.physics.arcade.velocityFromAngle(officer.angle,-officerVelocity.back*currentSet.speedCoefficient,officer.body.velocity),officer.animations.play('move',officerVelocity.back*currentSet.speedCoefficient/10,!1),game.time.now>stomp&&(sounds.foot.play('',0,0.5),stomp=game.time.now+2*officerVelocity.front)),game.input.keyboard.isDown(Phaser.Keyboard.SPACEBAR)&&currentSet.weaponSelected&&currentSet.numberOfCartridges&&makeShot(),(game.input.keyboard.isDown(Phaser.Keyboard.R)||!currentSet.numberOfCartridges)&&currentSet.weaponSelected&&reload(),game.input.keyboard.isDown(Phaser.Keyboard.ONE)?currentSet!==armory[0]&&(currentSet=armory[0],updateiFace(),updateOfficerTexture()):game.input.keyboard.isDown(Phaser.Keyboard.TWO)&&currentSet!==armory[1]&&1<armory.length&&(currentSet=armory[1],updateiFace(),updateOfficerTexture())},render:function(){game.debug.text('fps:'+game.time.fps||'--',10,20,'#00ff00'),game.debug.text(time.text,0.5*innerWidth-40,0.1*innerHeight,time.color,time.style)}};function createSounds(){createMainTheme(),createShootSound(),createReloadSound(),createFootSound(),createHitSound(),createCollectSound(),createHelicopterSound(),createZombiesSound()}function createMainTheme(){sounds.mainTheme=game.add.audio('fool-zombie'),sounds.mainTheme.play('',0,0.6,!0)}function createShootSound(){sounds.shoot=game.add.audio('shoot')}function createReloadSound(){sounds.reload=game.add.audio('reload')}function createFootSound(){sounds.foot=game.add.audio('footstep')}function createHelicopterSound(){sounds.helicopter={stay:game.add.audio('helicopter-stay'),fly:game.add.audio('helicopter-fly')}}function createCollectSound(){sounds.collect={health:game.add.audio('collect_health'),ammo:game.add.audio('collect_ammo')}}function createHitSound(){sounds.hit={_1:game.add.audio('hit_1'),_2:game.add.audio('hit_2'),_3:game.add.audio('hit_3'),_4:game.add.audio('hit_4')}}function createZombiesSound(){sounds.zombies={roar_1:game.add.audio('zombie_roar_1'),roar_2:game.add.audio('zombie_roar_2'),roar_3:game.add.audio('zombie_roar_3'),roar_4:game.add.audio('zombie_roar_4')}}function createSurface(){background=game.add.tileSprite(0,0,3*innerWidth,3*innerHeight,'ground'),game.world.setBounds(0,0,3*innerWidth,3*innerHeight)}function createArrow(){iFace.arrow=game.add.sprite(0.5*innerWidth,0.17*innerHeight,'arrow'),iFace.arrow.anchor.setTo(0.5),iFace.arrow.fixedToCamera=!0}function createBullet(){bullet=game.add.sprite(0,0,'bullet'),game.physics.enable(bullet,Phaser.Physics.ARCADE),bullet.anchor.setTo(0.5),bullet.checkWorldBounds=!0,bullet.outOfBoundsKill=!0}function createBlood(){blood=game.add.group();for(let a,b=0;100>b;b++)a=blood.create(0,0,'blood'),a.anchor.setTo(0.5),a.animations.add('spray',[0,1,2,3,4]),a.events.onAnimationComplete.add(addLoot,a),a.kill()}function createLoot(){loot=game.add.physicsGroup(Phaser.Physics.ARCADE);for(let a=0;a<enemiesCount/2;a++)createLootItem('clip'),createLootItem('clip'),createLootItem('pills'),createLootItem('kit');loot.setAll('collideWorldBounds',!0),loot.setAll('checkWorldBounds',!0)}function createLootItem(a){let b=loot.create(0,0,a);b.anchor.setTo(0.5),b.kill()}function createOfficer(){officer=game.add.sprite(game.world.centerX,game.world.centerY,'officer-move'),game.physics.enable(officer,Phaser.Physics.ARCADE),officer.scale.set(1.7),officer.anchor.setTo(0.5),officer.body.setCircle(14),officer.body.offset.set(2,8),officer.body.immovable=!0,officer.body.collideWorldBounds=!0,officer.animations.add('move',[0,1,2,3,4,5,6,7]),officer.animations.add('headless',[0,1,2,3]),officer.animations.add('die',[0,1,2,3]),officer.rotation=getRandomValue(-180,180)}function createWeapon(){weapon=game.add.sprite(game.world.centerX+250,game.world.centerY,'pistol'),game.physics.enable(weapon,Phaser.Physics.ARCADE),weapon.anchor.setTo(0.5)}function createEnemies(){enemies=game.add.physicsGroup(Phaser.Physics.ARCADE),addEnemies()}function addEnemies(){for(let a=0;a<enemiesCount;a++)createEnemy(enemies,zombies[getRandomValue(0,zombies.length)]);enemies.setAll('collideWorldBounds',!0),enemies.setAll('checkWorldBounds',!0)}function createEnemy(a,b){let c=setEnemy(),d=a.create(c.x,c.y,b+'-idle');d.anchor.setTo(0.5),d.body.setCircle(25),d.body.offset.set((d.width-d.body.width)/2,(d.height-d.body.width)/2),d.animations.add('idle',[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),d.animations.add('move',[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),d.animations.add('attack',[0,1,2,3,4,5,6,7,8]),d.animations.play('idle',15,!0),d.overlappedWithFOV=!1,d.collidedWithOfficer=!1,d.rotation=getRandomValue(-180,180),d.events.onKilled.add(enemyKillHandler,d),d.events.onAnimationComplete.add(hurtOfficer,d),d.events.onAnimationLoop.add(moveToOfficer,d)}function enemyKillHandler(){addPoints(),addBlood.call(this)}function addBlood(){let a=blood.getFirstDead();a.reset(this.x,this.y),a.lifespan=2e4,a.animations.play('spray',20,!1)}function addLoot(){let a;Math.random()>(100-dropChance)/100&&(a=Phaser.ArrayUtils.getRandomItem(loot.children.filter(function(a){return!a.alive})).reset(this.x,this.y),a.lifespan=6e4)}function addPoints(){iFace.score.setText(`${+iFace.score.text+1}`)}function createDetectionArea(){circle=game.add.sprite(officer.x,officer.y,'fov'),game.physics.enable(circle,Phaser.Physics.ARCADE),circle.anchor.set(0.5),circle.body.width=0.7*innerWidth,circle.body.height=0.7*innerHeight,circle.body.offset.x=-circle.body.width/2,circle.body.offset.y=-circle.body.height/2,circle.alpha=0}function createScore(){iFace.iconScore=game.add.sprite(0.05*innerWidth,0.3*innerHeight,'skull'),iFace.iconScore.fixedToCamera=!0,iFace.score=game.add.text(0,0,'0',{font:'35px Russo One',fill:'#ffffff',align:'center'}),iFace.score.alignTo(iFace.iconScore,Phaser.RIGHT_CENTER,30,5),iFace.score.anchor.setTo(0.5,0),iFace.score.fixedToCamera=!0}function createiFace(){iFace.weapon=game.add.sprite(0.05*innerWidth,0.05*innerHeight,currentSet.weaponPicture),iFace.weapon.fixedToCamera=!0,iFace.iconAmmo=game.add.sprite(0.11*innerWidth,0.175*innerHeight,'ammo'),iFace.iconAmmo.fixedToCamera=!0,iFace.ammo=game.add.text(0,0,'10/10',{font:'35px Russo One',fill:'#ffffff',align:'center'}),iFace.ammo.anchor.set(0.5,0),iFace.ammo.alignTo(iFace.iconAmmo,Phaser.LEFT_BOTTOM,1,5),iFace.ammo.fixedToCamera=!0,iFace.iconAmmo.visible=!1,iFace.ammo.visible=!1}function createHP(){let a=`${officerHP}`;iFace.iconHP=game.add.sprite(0.9*innerWidth,0.05*innerHeight,'HP'),iFace.iconHP.fixedToCamera=!0,iFace.HP=game.add.text(0,0,a,{font:'35px Russo One',fill:'#ffffff',align:'center'}),iFace.HP.alignTo(iFace.iconHP,Phaser.BOTTOM_CENTER,30),iFace.HP.anchor.setTo(0.5,0),iFace.HP.fixedToCamera=!0}function createTimer(){iFace.rescueText=game.add.text(0.5*innerWidth,0.035*innerHeight,'You\'ll be rescued in:',{font:'30px Russo One',fill:'#ff8381',align:'center'}),iFace.rescueText.anchor.setTo(0.5),iFace.rescueText.fixedToCamera=!0;let a=game.time.create(!1);a.loop(Phaser.Timer.SECOND,updateTimer,a),a.start()}function updateTimer(){let a=time.text.split(':'),b=a[0],c=a[1];'00'===b&&('01'===c&&(this.destroy(),time.color='#00ff00',accomplishRescue()),'10'===c&&(sounds.helicopter.fly.fadeIn(8e3,!0),game.time.events.add(10*Phaser.Timer.SECOND,()=>{sounds.helicopter.fly.stop(),sounds.helicopter.stay.play('',0,0.6,!0),sounds.mainTheme.fadeTo(1e3,0.5)},this))),'00'===c&&(addEnemies(),enemiesVelocity+=20,circle.body.width+=0.1*innerWidth,circle.body.height+=0.1*innerHeight,circle.body.offset.x-=0.05*innerWidth,circle.body.offset.y-=0.05*innerHeight,c='59',b=+b-1+'',1===b.length&&(b='0'+b)),c=+c-1+'',1===c.length&&(c='0'+c),time.text=b+':'+c}function createHelicopter(){let a=freeSpace();helicopter=game.add.sprite(a.x,a.y,'helicopter'),game.physics.enable(helicopter,Phaser.Physics.ARCADE),helicopter.anchor.setTo(0.65,0.5),helicopter.body.immovable=!0,helicopter.body.setCircle(130),helicopter.body.offset.set((helicopter.width-helicopter.body.width)/2+100,(helicopter.height-helicopter.body.width)/2),helicopter.animations.add('fly'),helicopter.animations.play('fly',35,!0),helicopter.rotation=getRandomValue(-180,180)}function freeSpace(){let a,b,c={x:350,y:game.world.centerY};if(2500>game.world.width||1500>game.world.height)return c;for(let c=officer.body.x-innerWidth/2-250,d=officer.body.x+innerWidth/2+250,e=officer.body.y-innerHeight/2-250,f=officer.body.y+innerHeight/2+250;a=getRandomValue(250,game.world.width-250),b=getRandomValue(250,game.world.height-250),!(a<c||a>d||b<e||b>f););return c.x=a,c.y=b,c}function accomplishRescue(){createHelicopter(),createArrow(),helicopterArrived=!0}function setCamera(a){game.camera.follow(a,Phaser.Camera.FOLLOW_LOCKON)}function overlapWeaponHandler(a,b){b.destroy(),currentSet={weaponSelected:!0,weaponPicture:'pistol-img',officerTexture:'officer-armed',numberOfCartridges:10,maxNumberOfCartridges:10,capacityOfClip:10,speedCoefficient:0.7,index:1},armory.push(currentSet),updateiFace(),updateOfficerTexture()}function overlapFireHandler(a,b){b.kill(),a.kill(),sounds.hit[`_${getRandomValue(1,4)}`].play()}function overlapEnemyHandler(a,b){b.overlappedWithFOV||(b.overlappedWithFOV=!0,b.loadTexture('zombie_03-move',0,!1),b.animations.play('move',15,!0),!win&&sounds.zombies[`roar_${getRandomValue(1,4)}`].play('',0,1,!0)),rotateEnemyToTarget(b,officer),moveEnemyToTarget(b,officer)}function overlapHelicopterHandler(a,b){let c=game.world.width+300,d=getRandomValue(0,game.world.height);for(let c in sounds.zombies)sounds.zombies[c].isPlaying&&sounds.zombies[c].stop();sounds.helicopter.stay.stop(),sounds.helicopter.fly.play('',0,1,!0),sounds.helicopter.fly.fadeOut(4e3),stopMainTheme(),circle.kill(),setCamera(b),cleaniFace(),rotateHelicopterToXY(c,d),moveHelicopterToXY(c,d,150),win=!0,game.time.events.add(4*Phaser.Timer.SECOND,()=>{game.state.start('end')},this)}function stopMainTheme(){sounds.mainTheme.stop()}function cleaniFace(){[officer,iFace.iconAmmo,iFace.ammo,iFace.iconHP,iFace.HP,iFace.iconScore,iFace.score,iFace.weapon,iFace.rescueText,iFace.arrow].forEach((a)=>{a.kill()}),game.debug.destroy()}function moveHelicopterToXY(a,b,c){game.physics.arcade.moveToXY(helicopter,a,b,c)}function rotateHelicopterToXY(a,b){helicopter.rotation=game.physics.arcade.angleToXY(helicopter,a,b)}function moveToOfficer(){for(let a in this.loadTexture('zombie_03-idle',0,!1),this.animations.play('idle',15,!0),this.overlappedWithFOV=!1,this.body.velocity.x=0,this.body.velocity.y=0,this.body.angularVelocity=0,sounds.zombies)sounds.zombies[a].isPlaying&&sounds.zombies[a].stop()}function collideDamageHandler(a,b){b.collidedWithOfficer||(b.collidedWithOfficer=!0,b.loadTexture('zombie_03-attack',0,!1),b.animations.play('attack',18,!1))}function hurtOfficer(){officerAlive&&(cameraFlash(),hurtHP()),this.collidedWithOfficer=!1}function cameraFlash(){game.camera.flash(16711680,100)}function hurtHP(){officerHP-=damages,0>officerHP&&(officerHP=0),changeHP()}function changeHP(){0>=officerHP&&(0.5<Math.random()?killOfficer('headless'):killOfficer('die'),officerAlive=!1),iFace.HP.setText(`${officerHP}`)}function killOfficer(a){officer.loadTexture('officer-'+a,0,!1),officer.animations.play(a,16,!1),stopMainTheme(),game.time.events.add(2*Phaser.Timer.SECOND,()=>{game.state.start('end')},this)}function overlapLootHandler(a,b){if('clip'===b.key)armory[1].maxNumberOfCartridges+=10,currentSet.index&&updateCartridges(!1),sounds.collect.ammo.play();else{if(100===officerHP)return;'kit'===b.key?restoreHP(30):restoreHP(10),changeHP(),sounds.collect.health.play()}b.kill()}function restoreHP(a){officerHP<=100-a?officerHP+=a:officerHP=100}function mouseWheel(){changeSet(),updateiFace(),updateOfficerTexture()}function changeSet(){let a;1===armory.length||(a=game.input.mouse.wheelDelta===Phaser.Mouse.WHEEL_UP?currentSet.index+1===armory.length?0:currentSet.index+1:currentSet.index?currentSet.index-1:armory.length-1,currentSet=armory[a],updateCartridges(!1))}function updateiFace(){1===armory.length||(iFace.iconAmmo.visible=!!currentSet.index,iFace.ammo.visible=!!currentSet.index,iFace.weapon.loadTexture(currentSet.weaponPicture))}function updateOfficerTexture(){1===armory.length||officer.loadTexture(currentSet.officerTexture,0)}function rotateEnemyToTarget(a,b){a.rotation=game.physics.arcade.angleBetween(a,b)}function moveEnemyToTarget(a,b){game.physics.arcade.moveToObject(a,b,enemiesVelocity)}function turnRoundToTarget(a,b){var c=Math.abs;let d=game.physics.arcade.angleBetween(a,b);if(d>c(a.rotation))for(;5e-3<d-c(a.rotation);)a.rotation+=1e-3;else for(;5e-3>d+c(a.rotation);)a.rotation-=1e-3;a.rotation=d}function makeShot(){game.time.now>nextFire&&(makeBullet(),makeFlash(),sounds.shoot.play('',0,5),updateCartridges(!0),nextFire=game.time.now+700)}function makeFlash(){flash?flash.reset(officer.x,officer.y):flash=game.add.sprite(officer.x,officer.y,'flash'),flash.lifespan=16,flash.rotation=officer.rotation,flash.anchor.setTo(-3,0.4)}function makeBullet(){bullet.reset(officer.x,officer.y),bullet.lifespan=700,bullet.rotation=officer.rotation,game.physics.arcade.velocityFromRotation(officer.rotation,2e3,bullet.body.velocity)}function updateCartridges(a){let b;b=a?`${0<currentSet.numberOfCartridges?--currentSet.numberOfCartridges:0}/${currentSet.maxNumberOfCartridges}`:`${currentSet.numberOfCartridges}/${currentSet.maxNumberOfCartridges}`,iFace.ammo.setText(b)}function getRandomValue(a,b){return~~(Math.random()*(b-a))+a}function reload(){currentSet.maxNumberOfCartridges&&currentSet.numberOfCartridges<currentSet.capacityOfClip&&(currentSet.maxNumberOfCartridges+=currentSet.numberOfCartridges,currentSet.maxNumberOfCartridges>=currentSet.capacityOfClip?(currentSet.numberOfCartridges=currentSet.capacityOfClip,currentSet.maxNumberOfCartridges-=currentSet.capacityOfClip):currentSet.maxNumberOfCartridges<currentSet.capacityOfClip&&(currentSet.numberOfCartridges=currentSet.maxNumberOfCartridges,currentSet.maxNumberOfCartridges=0),game.time.events.add(Phaser.Timer.SECOND/2,()=>{sounds.reload.play('',0,3),updateCartridges(!1)},this))}function setEnemy(){let a,b,c={x:0,y:0},d=officer.body.x-innerWidth/2,e=officer.body.x+innerWidth/2,f=officer.body.y-innerHeight/2,g=officer.body.y+innerHeight/2;for(;a=getRandomValue(10,game.world.width-10),b=getRandomValue(10,game.world.height-10),!(a<d||a>e||b<f||b>g););return c.x=a,c.y=b,c}let endState={create:function(){createSurface(),createBlur(),createTotal()}};function createBlur(){var a=game.add.filter('BlurX'),b=game.add.filter('BlurY');a.blur=7,b.blur=7,background.filters=[a,b]}function createTotal(){let a={font:'80px Russo One',align:'center',fill:win?'#00ff00':'#ff0000'},b=win?'Game Complete!':'Game Over!',c=game.add.text(0.5*innerWidth,0.4*innerHeight,b,a),d=game.add.text(0.5*innerWidth,0.5*innerHeight,'Your Score: '+iFace.score.text,a);c.anchor.setTo(0.5),d.anchor.setTo(0.5),c.alpha=0,d.alpha=0,game.add.tween(c).to({alpha:1},3e3,Phaser.Easing.Linear.None,!0),game.add.tween(d).to({alpha:1},3e3,Phaser.Easing.Linear.None,!0);let e=game.add.text(0.5*innerWidth,0.8*innerHeight,`exit to main menu`,{font:'40px Russo One',fontStyle:'italic',fill:'#ffffff',align:'center'});e.anchor.setTo(0.5),e.alpha=0,game.add.tween(e).to({alpha:1},800,Phaser.Easing.Linear.None,!0,0,800,!0),e.inputEnabled=!0,e.input.useHandCursor=!0,e.events.onInputDown.addOnce(restart,this)}function restart(){game.sound.stopAll(),reset(),game.state.start('menu')}function reset(){officerAlive=!0,officerHP=100,officerVelocity={front:200,back:150},damages=30,enemiesCount=50,enemiesVelocity=100,dropChance=40,win=!1,helicopterArrived=!1,time={text:'04:59',color:'#ff8381',style:'30px Russo One'},currentSet={weaponSelected:!1,weaponPicture:'fist',officerTexture:'officer-move',numberOfCartridges:0,maxNumberOfCartridges:0,capacityOfClip:0,speedCoefficient:1,index:0},armory=Array(currentSet),zombies=['zombie_03','zombie_03','zombie_03'],enemies,blood,loot,background,helicopter,officer,weapon,bullet,flash,circle,shadowTexture,LIGHT_RADIUS=294,nextFire=0,iFace={},sounds={},stomp=0}let game=new Phaser.Game(innerWidth,innerHeight,Phaser.AUTO,'game');game.state.add('boot',bootState),game.state.add('load',loadState),game.state.add('menu',menuState),game.state.add('play',playState),game.state.add('end',endState),game.state.start('boot'),WebFontConfig={google:{families:['Russo One','Eater']}};let enemies,blood,loot,background,helicopter,officer,weapon,bullet,flash,circle,shadowTexture,loadingText,officerAlive=!0,officerHP=100,officerVelocity={front:200,back:150},damages=30,enemiesCount=50,enemiesVelocity=100,dropChance=40,win=!1,helicopterArrived=!1,time={text:'04:59',color:'#ff8381',style:'30px Russo One'},currentSet={weaponSelected:!1,weaponPicture:'fist',officerTexture:'officer-move',numberOfCartridges:0,maxNumberOfCartridges:0,capacityOfClip:0,speedCoefficient:1,index:0},armory=Array(currentSet),zombies=['zombie_03','zombie_03','zombie_03'],LIGHT_RADIUS=294,nextFire=0,iFace={},sounds={},stomp=0;